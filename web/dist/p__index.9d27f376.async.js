"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{87259:function(K,L,r){r.r(L),r.d(L,{default:function(){return z}});var I=r(54306),R=r.n(I),O=r(25359),o=r.n(O),k=r(49811),x=r.n(k),Z=r(71402),W=r.n(Z),G=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"cloneFactory","type":"address"},{"internalType":"uint256","name":"createFee","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"ChangeCreateFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"erc20","type":"address"},{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"erc20Type","type":"uint256"}],"name":"NewERC20","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferPrepared","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdraw","type":"event"},{"stateMutability":"payable","type":"fallback","payable":true},{"inputs":[],"name":"_CLONE_FACTORY_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"_CREATE_FEE_","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"_NEW_OWNER_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"_OWNER_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"_USER_CUSTOM_MINTABLE_REGISTRY_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"_USER_CUSTOM_REGISTRY_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"_USER_STD_REGISTRY_","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"claimOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"initOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive","payable":true},{"inputs":[{"internalType":"address","name":"_erc20_template_","type":"address"},{"internalType":"uint256","name":"totalSupply","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"}],"name":"createStdERC20","outputs":[{"internalType":"address","name":"newERC20","type":"address"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_custom_erc20_template_","type":"address"},{"internalType":"uint256","name":"totalSupply","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"tradeBurnRatio","type":"uint256"},{"internalType":"uint256","name":"tradeFeeRatio","type":"uint256"},{"internalType":"address","name":"teamAccount","type":"address"}],"name":"createCustomERC20","outputs":[{"internalType":"address","name":"newCustomERC20","type":"address"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"_custom_mintable_erc20_template_","type":"address"},{"internalType":"uint256","name":"initSupply","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"tradeBurnRatio","type":"uint256"},{"internalType":"uint256","name":"tradeFeeRatio","type":"uint256"},{"internalType":"address","name":"teamAccount","type":"address"}],"name":"createCustomMintableERC20","outputs":[{"internalType":"address","name":"newCustomMintableERC20","type":"address"}],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getTokenByUser","outputs":[{"internalType":"address[]","name":"stds","type":"address[]"},{"internalType":"address[]","name":"customs","type":"address[]"},{"internalType":"address[]","name":"mintables","type":"address[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"changeCreateFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),S="0xa7c7c2886171160145810436481c62bdd8d6beec",h,H=function(u,l,s){return new Promise(function(){var d=x()(o()().mark(function c(m,t){var a,b,T,i,w,f,j,F;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=N.getContractLesson7ERC20V3Factory(),b=a.methods[l],console.log(s),T=b.apply({},s).encodeABI(),y.next=6,h.eth.estimateGas({to:S,data:T,from:u,value:0});case 6:return i=y.sent,y.next=9,h.eth.getChainId();case 9:return w=y.sent,y.next=12,h.eth.getGasPrice();case 12:return f=y.sent,y.next=15,h.eth.getTransactionCount(u);case 15:j=y.sent,F={from:u,to:S,nonce:j,gasPrice:f,gas:i*2,value:"0x0",data:T,chainId:w},h.eth.sendTransaction(F).on("transactionHash",function(n){console.log("txHash:",n),m(n)});case 18:case"end":return y.stop()}},c)}));return function(c,m){return d.apply(this,arguments)}}())},N={instance:function(){if(h)return h;if(!window.ethereum)throw"\u672A\u5B89\u88C5\u94B1\u5305, \u8BF7\u5B89\u88C5\u94B1\u5305\u540E\u91CD\u8BD5";return h=new(W())(window.ethereum),h},getContractLesson7ERC20V3Factory:function(){var u=N.instance().eth.Contract,l=new u(G.Mt,S);return l},createStdERC20:function(){var p=x()(o()().mark(function l(s){var d,c;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.eth.getAccounts();case 2:return d=t.sent,t.next=5,H(d[0],"createStdERC20",[s._erc20_template_,s.totalSupply,s.name,s.symbol,0]);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}},l)}));function u(l){return p.apply(this,arguments)}return u}()},v=N,B=r(65524),D=r(57924),E=r(93236),e=r(62086),g=v.instance();function P(p,u){var l=(0,E.useState)([]),s=R()(l,2),d=s[0],c=s[1],m=(0,E.useState)(),t=R()(m,2),a=t[0],b=t[1],T=function(){var i=x()(o()().mark(function w(){var f,j,F,A;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.eth.getAccounts();case 2:return f=n.sent,c(f),n.next=6,g.eth.getBlockNumber();case 6:return j=n.sent,n.next=9,g.eth.getBlock(j);case 9:return F=n.sent,n.next=12,g.eth.getChainId();case 12:return n.t0=n.sent,n.t1=j,n.t2=F.timestamp,n.next=17,g.eth.getBalance(f[0]);case 17:n.t3=n.sent,A={chainId:n.t0,blockNumber:n.t1,blockTimestamp:n.t2,balance:n.t3},b(A),p.onLogin&&p.onLogin();case 21:case"end":return n.stop()}},w)}));return function(){return i.apply(this,arguments)}}();return(0,E.useEffect)(function(){g.eth.getAccounts().then(function(i){T()})},[]),a?(0,e.jsx)(B.Z,{title:"\u767B\u5F55\u8D26\u53F7\uFF1A"+d[0],children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"chainId"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:a==null?void 0:a.chainId})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"BlockNumber"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:a==null?void 0:a.blockNumber})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"blockTimestamp"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:a==null?void 0:a.blockTimestamp})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"\u4F59\u989D"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:g.utils.fromWei(a.balance)})]})]})}):(0,e.jsx)("div",{children:(0,e.jsx)(D.ZP,{type:"primary",onClick:x()(o()().mark(function i(){return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,window.ethereum.enable();case 2:T();case 3:case"end":return f.stop()}},i)})),children:"\u767B\u5F55"})})}var Q=v.instance(),U=v.getContractLesson7ERC20V3Factory();function V(p){var u=(0,E.useState)([]),l=R()(u,2),s=l[0],d=l[1],c=function(){var m=x()(o()().mark(function t(){var a,b;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,v.instance().eth.getAccounts();case 2:if(a=i.sent,a.length!=0){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,U.methods.getTokenByUser(a[0]).call();case 7:b=i.sent,d(b[0]),console.log(b);case 10:case"end":return i.stop()}},t)}));return function(){return m.apply(this,arguments)}}();return(0,E.useEffect)(function(){c()},[]),(0,e.jsx)(B.Z,{title:"\u53D1\u5E01\u8BB0\u5F55",className:"mt-3",children:function(){return s.length==0?(0,e.jsx)("div",{children:"\u6682\u793A\u53D1\u5E01"}):(0,e.jsx)("div",{children:s.map(function(m,t){return(0,e.jsx)("div",{children:(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/"+m+"#code",target:"_blank",children:m})},t)})})}()})}var X=v.instance();function $(p){return(0,e.jsxs)(B.Z,{title:"\u5F97\u5206\u70B9",className:"mt-3",children:[(0,e.jsxs)("div",{className:"",children:["CloneFactory:"," ",(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/0x7522C532B511446a2387748b81eB5E73E2231c80#code",target:"_blank",children:"0x7522C532B511446a2387748b81eB5E73E2231c80"}),(0,e.jsx)("br",{}),"ERC20 \u6A21\u677F\u5408\u7EA6\uFF1A",(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/0x159288596C68dDc8a97E18ECdd3d2eB0d6b21616#code",target:"_blank",children:"0x159288596C68dDc8a97E18ECdd3d2eB0d6b21616"}),(0,e.jsx)("br",{}),"\u521B\u5EFA\u4EE3\u5E01\u5DE5\u5382\u5408\u7EA6\uFF1A",(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/0xa7c7c2886171160145810436481c62bdd8d6beec#code",target:"_blank",children:"0xa7c7c2886171160145810436481c62bdd8d6beec"}),(0,e.jsx)("br",{}),"\u5DE5\u5382\u5408\u7EA6\u7684\u521D\u59CB\u5316\u8BBE\u7F6E\uFF1A",(0,e.jsx)("a",{href:"https://github.com/gaollg/tintin-lesson-7/blob/main/truffle/migrations/4_deploy_Lesson7ERC20V3Factory.js",target:"_blank",children:"github.com/gaollg/.../4_deploy_Lesson7ERC20V3Factory.js"})]}),(0,e.jsxs)("div",{className:"mt-4",children:["\u5408\u7EA6\u53D1\u5E03\u8BB0\u5F55\uFF1A",(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/0x1c4f4a2055a7a2138cb063617fed8955da4b0d45",target:"_blank",children:"0x1c4f4a2055a7a2138cb063617fed8955da4b0d45"})]})]})}var C=r(67071),M=r(33357),Y=r(88223),q=v.instance();function J(p){var u=function(){var s=x()(o()().mark(function d(c){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("\u8868\u5355\u503C:",c),v.createStdERC20(c).then(function(a){alert("\u53D1\u5E01\u6210\u529F"+JSON.stringify(a))});case 2:case"end":return t.stop()}},d)}));return function(c){return s.apply(this,arguments)}}(),l=function(d){console.log("Failed:",d)};return(0,e.jsx)(B.Z,{title:"\u6D4F\u89C8\u5668\u4E00\u952E\u53D1\u5E01",className:"mt-3",children:(0,e.jsxs)(C.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{_erc20_template_:"0x159288596c68ddc8a97e18ecdd3d2eb0d6b21616",totalSupply:10086,name:"TinTin Lesson7 NFT",symbol:"7NFT"},onFinish:u,onFinishFailed:l,autoComplete:"off",children:[(0,e.jsx)(C.Z.Item,{label:"ERC20 \u6A21\u677F\u5730\u5740",name:"_erc20_template_",rules:[{required:!0,message:"\u6A21\u677F\u5730\u5740\u53EF\u8BBE\u4E3A 0x159288596C68dDc8a97E18ECdd3d2eB0d6b21616"}],children:(0,e.jsx)(M.Z,{})}),(0,e.jsx)(C.Z.Item,{label:"\u603B\u6570\u91CF",name:"totalSupply",rules:[{required:!0,message:"\u8BA4\u771F\u6DF7\u5708\uFF0C\u4ED4\u7EC6\u586B\u5199"}],children:(0,e.jsx)(Y.Z,{})}),(0,e.jsx)(C.Z.Item,{label:"\u8D27\u5E01\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BA4\u771F\u6DF7\u5708\uFF0C\u4ED4\u7EC6\u586B\u5199"}],children:(0,e.jsx)(M.Z,{})}),(0,e.jsx)(C.Z.Item,{label:"\u8D27\u5E01\u7B26\u53F7",name:"symbol",rules:[{required:!0,message:"\u8BA4\u771F\u6DF7\u5708\uFF0C\u4ED4\u7EC6\u586B\u5199"}],children:(0,e.jsx)(M.Z,{})}),(0,e.jsx)(C.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(D.ZP,{type:"primary",htmlType:"submit",children:"\u53D1\u5E01"})})]})})}function z(){var p=(0,E.useState)(!1),u=R()(p,2),l=u[0],s=u[1];return window.ethereum?(0,e.jsxs)("div",{children:[(0,e.jsx)(P,{onLogin:function(){s(!0),console.log("xxxxxxxxxxx")}}),function(){return l?(0,e.jsxs)("div",{children:[(0,e.jsx)($,{}),(0,e.jsx)(J,{}),(0,e.jsx)(V,{})]}):(0,e.jsx)("div",{})}()]}):(0,e.jsx)("div",{children:"\u672A\u5B89\u88C5\u94B1\u5305, \u8BF7\u5B89\u88C5\u94B1\u5305\u540E\u91CD\u8BD5"})}}}]);
